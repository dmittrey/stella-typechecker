language core;

extend with #exception-type-declaration;
extend with #exceptions;
extend with #open-variant-exceptions;
extend with #multiparameter-functions;
extend with #comparison-operators;
extend with #variants;
extend with #natural-literals;

exception variant a : Bool
exception variant b : Bool

exception type = Nat 

fn div(x : Nat, y : Nat) -> Bool {
  return if y == 0 then
    throw(<| a = true |>)   // кидаем вариант
  else
    x == 0
}

fn main(n : Nat) -> Bool {
  return try { div(n, 0) } catch {
    <| b = v |> => true
  }
}

//ERROR_UNEXPECTED_VARIANT